#!/bin/bash
# üîß –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ—Ä—Ç–æ–≤ 8080, 5000, 5001, 5173

echo "üßπ –û—á–∏—â–∞—é –ø–æ—Ä—Ç—ã –æ—Ç —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."

# –ù–∞—Ö–æ–¥–∏–º –∏ —É–±–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç–∞—Ö
PORTS=(8080 5000 5001 5173)

for PORT in "${PORTS[@]}"; do
    PIDS=$(lsof -ti:$PORT)
    if [ ! -z "$PIDS" ]; then
        echo "   üî¥ –£–±–∏–≤–∞—é –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É $PORT: $PIDS"
        kill -9 $PIDS 2>/dev/null
    else
        echo "   ‚úÖ –ü–æ—Ä—Ç $PORT —Å–≤–æ–±–æ–¥–µ–Ω"
    fi
done

# –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ npm/vite –ø—Ä–æ—Ü–µ—Å—Å—ã
echo ""
echo "üßπ –û—á–∏—â–∞—é —Å—Ç–∞—Ä—ã–µ Node.js –ø—Ä–æ—Ü–µ—Å—Å—ã..."

pkill -f "vite" 2>/dev/null
pkill -f "npm run dev" 2>/dev/null

sleep 2

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—ã:"
echo "   npm run dev"



