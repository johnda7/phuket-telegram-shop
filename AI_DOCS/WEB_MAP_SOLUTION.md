# üó∫Ô∏è –†–ï–®–ï–ù–ò–ï: –ü–û–ö–ê–ó–ê–¢–¨ –ö–ê–†–¢–£ –ù–ê –°–ê–ô–¢–ï

> **–í–æ–ø—Ä–æ—Å:** –ú–æ–∂–µ–º –ª–∏ –º—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ Maps.me –ø—Ä—è–º–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ?  
> **–û—Ç–≤–µ—Ç:** Maps.me –Ω–µ–ª—å–∑—è –≤—Å—Ç—Ä–æ–∏—Ç—å (–º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ), –Ω–æ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Leaflet + OpenStreetMap** (—Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ!)

---

## ‚ùå –ü–û–ß–ï–ú–£ MAPS.ME –ù–ï–õ–¨–ó–Ø –í–°–¢–†–û–ò–¢–¨

**Maps.me - —ç—Ç–æ:**
- üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (iOS/Android)
- ‚ùå –ù–µ—Ç –≤–µ–±-–≤–µ—Ä—Å–∏–∏
- ‚ùå –ù–µ—Ç API –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –Ω–∞ —Å–∞–π—Ç
- ‚ùå –ù–µ—Ç iframe –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ù–æ —Ö–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å:** Maps.me –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ —á—Ç–æ –∏ OpenStreetMap! 

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: LEAFLET + OPENSTREETMAP

### –ü–æ—á–µ–º—É Leaflet –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–∞—Å:

**1. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ 100%:**
- ‚úÖ OpenStreetMap –¥–∞–Ω–Ω—ã–µ - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ
- ‚úÖ Leaflet –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ - –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è
- ‚úÖ –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ API –∫–ª—é—á–µ

**2. –¢–µ –∂–µ –¥–∞–Ω–Ω—ã–µ —á—Ç–æ Maps.me:**
```
Maps.me –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: OpenStreetMap
Leaflet –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: OpenStreetMap
‚Üí –û–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∫–∞—Ä—Ç—ã! üéØ
```

**3. –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å:**
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
- ‚úÖ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Info windows
- ‚úÖ –°–≤–æ–∏ —Å—Ç–∏–ª–∏
- ‚úÖ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

**4. –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**
```bash
npm install react-leaflet leaflet
```

---

## üöÄ –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –®–ê–ì 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫

```bash
npm install react-leaflet leaflet
npm install @types/leaflet --save-dev  # –¥–ª—è TypeScript
```

### –®–ê–ì 2: –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏

```typescript
// src/main.tsx –∏–ª–∏ App.tsx
import 'leaflet/dist/leaflet.css';
```

### –®–ê–ì 3: –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã

```typescript
// src/components/LeafletMap.tsx
import { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';
import { Icon } from 'leaflet';
import { PlaceMarker } from '@/pages/Map';

interface LeafletMapProps {
  places: PlaceMarker[];
  height?: string;
}

const LeafletMap = ({ places, height = "calc(100vh - 200px)" }: LeafletMapProps) => {
  // –¶–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã (–ü—Ö—É–∫–µ—Ç)
  const center: [number, number] = [7.8804, 98.3923];
  
  return (
    <MapContainer 
      center={center} 
      zoom={11} 
      style={{ height, width: '100%' }}
      className="rounded-2xl"
    >
      {/* OpenStreetMap —Ç–∞–π–ª—ã (–±–µ—Å–ø–ª–∞—Ç–Ω–æ!) */}
      <TileLayer
        attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
      />
      
      {/* –ú–∞—Ä–∫–µ—Ä—ã –º–µ—Å—Ç */}
      {places.map((place) => (
        <Marker
          key={place.handle}
          position={[place.lat, place.lng]}
          icon={new Icon({
            iconUrl: place.isPartner 
              ? '/marker-partner.png' 
              : '/marker-default.png',
            iconSize: [32, 32],
          })}
        >
          <Popup>
            <div className="p-2">
              <h3 className="font-bold text-sm">{place.emoji} {place.title}</h3>
              {place.rating && (
                <p className="text-xs text-gray-600">‚≠ê {place.rating}</p>
              )}
              <a 
                href={`/place/${place.handle}`}
                className="text-[#007AFF] text-xs font-medium mt-1 block"
              >
                –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí
              </a>
            </div>
          </Popup>
        </Marker>
      ))}
    </MapContainer>
  );
};

export default LeafletMap;
```

### –®–ê–ì 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ Map.tsx

```typescript
// src/pages/Map.tsx
import LeafletMap from '@/components/LeafletMap';

// –ó–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π iframe –Ω–∞:
<LeafletMap places={sortedPlaces} />
```

---

## üí° –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê LEAFLET VS GOOGLE MAPS

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Leaflet + OSM | Google Maps JS API |
|----------|---------------|-------------------|
| **–¶–µ–Ω–∞** | **–ë–ï–°–ü–õ–ê–¢–ù–û** ‚úÖ | –ü–ª–∞—Ç–Ω–æ –ø–æ—Å–ª–µ 28K –∑–∞–≥—Ä—É–∑–æ–∫/–º–µ—Å—è—Ü |
| **API –∫–ª—é—á** | **–ù–ï –ù–£–ñ–ï–ù** ‚úÖ | –ù—É–∂–µ–Ω (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞) |
| **–î–∞–Ω–Ω—ã–µ** | OpenStreetMap (—Ç–µ –∂–µ —á—Ç–æ Maps.me) ‚úÖ | Google Maps |
| **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** | –ù–µ—Ç ‚úÖ | –î–∞ (–ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤) |
| **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** | –ü–æ–ª–Ω–∞—è ‚úÖ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |
| **–û—Ñ–ª–∞–π–Ω** | –ú–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å ‚úÖ | –ù–µ—Ç |

---

## üéØ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### 1. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤

```bash
npm install react-leaflet-cluster
```

```typescript
import MarkerClusterGroup from 'react-leaflet-cluster';

<MarkerClusterGroup>
  {places.map(place => (
    <Marker key={place.handle} position={[place.lat, place.lng]} />
  ))}
</MarkerClusterGroup>
```

### 2. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Å —ç–º–æ–¥–∑–∏

```typescript
import L from 'leaflet';

const createEmojiIcon = (emoji: string) => {
  return L.divIcon({
    html: `<div style="font-size: 24px;">${emoji}</div>`,
    className: 'custom-emoji-marker',
    iconSize: [32, 32],
  });
};

<Marker
  icon={createEmojiIcon(place.emoji)}
  position={[place.lat, place.lng]}
/>
```

### 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ

```typescript
// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ - –æ–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä—ã
const filteredMarkers = useMemo(() => {
  if (selectedCategory === 'all') return places;
  return places.filter(p => p.category === selectedCategory);
}, [places, selectedCategory]);

<LeafletMap places={filteredMarkers} />
```

### 4. –í—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞

```typescript
// –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –º–µ—Å—Ç–æ –≤ —Å–ø–∏—Å–∫–µ - —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É
const mapRef = useRef<L.Map>(null);

useEffect(() => {
  if (selectedPlaceHandle && mapRef.current) {
    const place = places.find(p => p.handle === selectedPlaceHandle);
    if (place) {
      mapRef.current.setView([place.lat, place.lng], 13);
    }
  }
}, [selectedPlaceHandle]);
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –° MAPS.ME

| –§—É–Ω–∫—Ü–∏—è | Maps.me (–º–æ–±–∏–ª—å–Ω–æ–µ) | Leaflet (–≤–µ–±) |
|---------|---------------------|---------------|
| **–û—Ñ–ª–∞–π–Ω** | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π | ‚ö†Ô∏è –ú–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **–ù–∞–≤–∏–≥–∞—Ü–∏—è** | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è | ‚ùå –ù–µ—Ç (–Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å) |
| **–í–µ–±-–≤–µ—Ä—Å–∏—è** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å (–Ω–∞—à —Å–∞–π—Ç) |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ | ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| **–î–∞–Ω–Ω—ã–µ** | OpenStreetMap | OpenStreetMap (—Ç–µ –∂–µ!) ‚úÖ |
| **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** | ‚úÖ –î–∞ | ‚úÖ –î–∞ |

---

## ‚úÖ –ò–¢–û–ì–û–í–û–ï –†–ï–®–ï–ù–ò–ï

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º:**
- **Leaflet + OpenStreetMap** –¥–ª—è –≤–µ–±-–∫–∞—Ä—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ
- **–≠–∫—Å–ø–æ—Ä—Ç KML –¥–ª—è Maps.me** –¥–ª—è –æ—Ñ–ª–∞–π–Ω-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü–æ—á–µ–º—É —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ:**
1. ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ 100%
2. ‚úÖ –¢–µ –∂–µ –∫–∞—Ä—Ç—ã —á—Ç–æ Maps.me (OpenStreetMap)
3. ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
4. ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –∏–∑ Shopify
5. ‚úÖ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–∞—Ä—Ç–∞ –Ω–∞ —Å–∞–π—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- –î–∞–Ω–Ω—ã–µ –∏–∑ Shopify (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç KML –¥–ª—è Maps.me (–¥–ª—è –æ—Ñ–ª–∞–π–Ω)

---

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úÖ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô (–ª—É—á—à–µ —á–µ–º iframe, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —Ç–µ –∂–µ –∫–∞—Ä—Ç—ã!)

